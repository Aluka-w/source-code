# 面试汇总

## 某房地产上市公司

### 初试

* 如何使用在forEach遍历中使用async/await

    举例：提供水果名称数组，根据名称从服务器获取数量

    答案：不要和forEach一起使用await，forEach不支持 promise 感知，而是使用for循环(或任何没有回调的循环)

 > 参考 https://juejin.im/post/5cf7042df265da1ba647d9d1

* 熟悉的设计模式

  1. 工厂模式：封装实例化的过程
  
  2. 发布订阅：
  
  3. 观察者：

* react和vue的diff算法有什么异同？

* 操作虚拟dom和操作原生dom性能更高嘛？

## 复试

* 100张图片怎么实现图片上传（网络请求并发控制）

  通过控制异步请求的并发数，有请求结束再发起下一个请求
  
  ```js
    const sendRequest = async (forms, max = 4) => {
      return new Promise((resolve) => {
        const len = forms.length
        let idx = 0
        let counter = 0
        const start = async () => {
          // 有请求，有通道
          while (idx < len && max > 0) {
            max-- // 占用通道
            console.log(idx, 'start')
            const form = forms[idx].form
            const index = forms[idx].index
            idx++
            request({
              url: '/upload',
              data: form,
              onProgress: this.createProgresshandler(this.chunks[index]),
              requestList: this.requestList,
            }).then(() => {
              max++ // 释放通道
              counter++
              if (counter === len) {
                resolve()
              } else {
                start()
              }
            })
          }
        }
        start()
      })
    }
  ```

* 大文件上传和断点续传（举例：一张50M的图片怎么上传）

  > 参考：`https://juejin.im/post/5dff8a26e51d4558105420ed`

* Promise.then(A).then(B).then(C), B报错的时候，c还执行嘛（假如不能，那怎么实现让他能执行呢）

  ```js
    // try-catch确保执行
    Promise.resolve(1)
    .then(() => {
      try {
        throw new Error('err')
      } catch (error) {
      }
    })
    .then(() => {
      console.log(123);
    })
    .catch((err) => {
      console.log(err);
    })
  ```

* Promise.all() 是并行的，怎么让它串行呢？

* 项目中遇到了什么问题嘛，说一下（然后问的贼细致）
* 项目优化问题（常见项目优化，假如碰到项目越做越大怎么优化）
* 移动端碰到了什么问题
* 验证码发送出去，多次同时返回
* 移动端上传图片，图片发生旋转场景，原因，解决方案?
